{% extends "main.html" %}

{% block extrahead %}
  {{ super() }}
  <script>
    // Add class to body to identify homepage (run immediately)
    (function() {
      if (document.body) {
        document.body.classList.add('homepage');
      } else {
        // Fallback if body doesn't exist yet
        document.addEventListener('DOMContentLoaded', function() {
          document.body.classList.add('homepage');
        });
      }
    })();
  </script>
{% endblock %}

{% block tabs %}
  {{ super() }}

  <section class="mdx-carousel-container">
    <div class="mdx-carousel-wrapper">
      <!-- Main Carousel Content -->
      <div class="mdx-carousel" id="mdx-carousel" role="region" aria-label="Featured highlights carousel" data-autoplay="true" data-interval="6000">
        
        <!-- Slide 1: KVM-GO Series -->
        <div class="carousel-slide carousel-slide--active" data-slide-index="1">
          <div class="carousel-content-left">
            <div class="carousel-category" data-i18n="home.series-kvm-go">KVM-GO Series</div>
            <h1 class="carousel-headline" data-i18n="home.kvm-go-headline">The Ultra-Compact KVM That Fits on Keychain</h1>
            <p class="carousel-description" data-i18n="home.kvm-go-description">
              Designed to fit on your keychain and save your day in a snap, this next-generation KVM-over-USB gadget is built for rapid IT operations in the field.
            </p>
            <div class="carousel-actions">
              <a href="https://www.crowdsupply.com/techxartisan/openterface-kvm-go" class="md-button md-button--primary carousel-btn-preorder" data-i18n="home.crowdfunding-now" target="_blank" rel="noopener noreferrer">
                Crowdfunding NOW
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 140 140" class="carousel-btn-icon">
                  <path d="M 68.3,9.7 8,70 68.3,130.3 Z" fill="#555" />
                  <path d="M 71.7,9.7 V 130.3 L 132,70 Z" fill="#099" />
                  <path d="m 90.7,91 c -6.6,0 -11.8,-3.6 -14,-12 l 8,-1.7 c 0.9,5.1 3.9,7 6.3,7 2.8,0 5,-1.9 5,-5.1 0,-8 -18.2,-8.2 -18.2,-20.1 0,-7.3 4.4,-12 12.8,-12 7.3,0 11.7,4.3 13.1,10.4 l -7.3,2.1 c -1.4,-4 -3.1,-5.7 -6,-5.7 -2.9,0 -4.5,1.8 -4.5,4.7 0,6.4 18.2,6.9 18.2,20.3 0.2,7.2 -4.9,12.1 -13.4,12.1 z" fill="#FFF" />
                  <path d="m 60.7,63.9 h -8.2 v -3.6 c 0,-4.7 -2.1,-6 -5.3,-6 -3.2,0 -5.3,1.3 -5.3,6 v 17.4 c 0,4.7 2.1,6 5.3,6 3.2,0 5.3,-1.3 5.3,-6 v -3.8 h 8.2 v 2.7 c 0,10.5 -5.6,14.3 -13.5,14.3 -7.9,0 -13.5,-3.8 -13.5,-14.3 V 61.4 c 0,-10.5 5.6,-14.3 13.5,-14.3 7.9,0 13.5,3.8 13.5,14.3 z" fill="#FFF" />
                </svg>
              </a>
              <div class="carousel-countdown" id="kvm-go-countdown"></div>
            </div>
          </div>
          <div class="carousel-content-right">
            <img src="{{ 'assets/images/kvm-go-triple.png' | url }}" alt="KVM-GO Series" loading="eager" draggable="false" fetchpriority="high">
          </div>
        </div>

        <!-- Slide 2: Mini-KVM -->
        <div class="carousel-slide" data-slide-index="2">
          <div class="carousel-content-left">
            <div class="carousel-category" data-i18n="home.series-mini-kvm">Mini-KVM Series</div>
            <h1 class="carousel-headline" data-i18n="home.mini-kvm-headline">The Compact KVM Solution for Professionals</h1>
            <p class="carousel-description" data-i18n="home.mini-kvm-description">
              A compact, feature-rich, open-source KVM-over-USB solution that simplifies your tech life with on-the-fly IT tasks and troubleshooting.
            </p>
            <div class="carousel-actions">
              <a href="{{ config.extra.minikvm_purchase_link | url }}" class="md-button md-button--primary carousel-btn-secondary" data-i18n="home.order-now" target="_blank" rel="noopener noreferrer">
                Order NOW
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 140 140" class="carousel-btn-icon">
                  <path d="M 68.3,9.7 8,70 68.3,130.3 Z" fill="#555" />
                  <path d="M 71.7,9.7 V 130.3 L 132,70 Z" fill="#099" />
                  <path d="m 90.7,91 c -6.6,0 -11.8,-3.6 -14,-12 l 8,-1.7 c 0.9,5.1 3.9,7 6.3,7 2.8,0 5,-1.9 5,-5.1 0,-8 -18.2,-8.2 -18.2,-20.1 0,-7.3 4.4,-12 12.8,-12 7.3,0 11.7,4.3 13.1,10.4 l -7.3,2.1 c -1.4,-4 -3.1,-5.7 -6,-5.7 -2.9,0 -4.5,1.8 -4.5,4.7 0,6.4 18.2,6.9 18.2,20.3 0.2,7.2 -4.9,12.1 -13.4,12.1 z" fill="#FFF" />
                  <path d="m 60.7,63.9 h -8.2 v -3.6 c 0,-4.7 -2.1,-6 -5.3,-6 -3.2,0 -5.3,1.3 -5.3,6 v 17.4 c 0,4.7 2.1,6 5.3,6 3.2,0 5.3,-1.3 5.3,-6 v -3.8 h 8.2 v 2.7 c 0,10.5 -5.6,14.3 -13.5,14.3 -7.9,0 -13.5,-3.8 -13.5,-14.3 V 61.4 c 0,-10.5 5.6,-14.3 13.5,-14.3 7.9,0 13.5,3.8 13.5,14.3 z" fill="#FFF" />
                </svg>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="{{ 'assets/images/mini-kvm-toolkit.png' | url }}" alt="Openterface Mini-KVM" loading="lazy" draggable="false" class="carousel-lazy-image">
          </div>
        </div>

        <!-- Slide 3: uConsole KVM Extension -->
        <div class="carousel-slide" data-slide-index="3">
          <div class="carousel-content-left">
            <div class="carousel-category" data-i18n="home.series-uconsole">uConsole Ext. Series</div>
            <h1 class="carousel-headline" data-i18n="home.uconsole-headline">Transform Your uConsole Into a KVM Console</h1>
            <p class="carousel-description" data-i18n="home.uconsole-description">
              Turn your uConsole into a portable KVM console â€“ now taking pre-orders for Openterface KVM Ext. for uConsole. Your all-in-one portable solution.
            </p>
            <div class="carousel-actions">
              <a href="https://shop.techxartisan.com/products/openterface-kvm-ext-for-uconsole" class="md-button md-button--primary carousel-btn-secondary" data-i18n="home.order-now" target="_blank" rel="noopener noreferrer">
                Order NOW
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="carousel-btn-icon">
                  <path fill="#faa22c" d="M166.32,10H33.68A23.68,23.68,0,0,0,10,33.68V166.32A23.68,23.68,0,0,0,33.68,190H166.32A23.68,23.68,0,0,0,190,166.32V33.68A23.68,23.68,0,0,0,166.32,10ZM150.21,79H134.55l-21.4,21.4L133.82,121h16.39v29.18H121V134.56l-21-21-21,21v15.66H49.79V121H66.17l20.67-20.66L65.44,79H49.79V49.79H79V66.18l21,21,21-21V49.79h29.18Z"/>
                  <path fill="#211e1f" d="M150.21,79V49.79H121V66.17l-21,21-21-21V49.79H49.79V79H65.44l21.4,21.4L66.17,121H49.79v29.18H79V134.55l21-21,21,21v15.65h29.18V121H133.82l-20.67-20.66L134.55,79ZM100,106.21h0L73.73,132.48a9.79,9.79,0,0,1,.5,3.08,9.92,9.92,0,1,1-9.92-9.91,9.81,9.81,0,0,1,3.27.56L93.79,100,67.05,73.26a9.91,9.91,0,1,1,7.18-9.53,9.73,9.73,0,0,1-.69,3.6L106.21,100Z"/>
                  <path fill="#f9f9fa" d="M100,106.21l6.21-6.21L73.54,67.33a9.73,9.73,0,0,0,.69-3.6,9.94,9.94,0,1,0-7.18,9.53L93.79,100,67.58,126.21a9.81,9.81,0,0,0-3.27-.56,9.91,9.91,0,1,0,9.92,9.91,9.79,9.79,0,0,0-.5-3.08L100,106.21Z"/>
                </svg>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="{{ 'assets/images/uconsole.png' | url }}" alt="uConsole KVM Extension" loading="lazy" draggable="false" class="carousel-lazy-image">
          </div>
        </div>

        <!-- Slide 4: TxA Shop - Accessories -->
        <div class="carousel-slide" data-slide-index="4">
          <div class="carousel-content-left">
            <div class="carousel-category" data-i18n="home.series-txa-shop">TxA Shop</div>
            <h1 class="carousel-headline" data-i18n="home.txa-shop-headline">Complete Your Setup with Premium Accessories</h1>
            <p class="carousel-description" data-i18n="home.txa-shop-description">
              Explore our range of essential accessories including video adapters, high-speed cables, and storage solutions. Enhance your Openterface experience with quality accessories designed for professionals.
            </p>
            <div class="carousel-actions">
              <a href="https://shop.techxartisan.com/" class="md-button md-button--primary carousel-btn-xmas" data-i18n="home.xmas-special" target="_blank" rel="noopener noreferrer">
                ðŸŽ„ Xmas Special
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="carousel-btn-icon">
                  <path fill="#faa22c" d="M166.32,10H33.68A23.68,23.68,0,0,0,10,33.68V166.32A23.68,23.68,0,0,0,33.68,190H166.32A23.68,23.68,0,0,0,190,166.32V33.68A23.68,23.68,0,0,0,166.32,10ZM150.21,79H134.55l-21.4,21.4L133.82,121h16.39v29.18H121V134.56l-21-21-21,21v15.66H49.79V121H66.17l20.67-20.66L65.44,79H49.79V49.79H79V66.18l21,21,21-21V49.79h29.18Z"/>
                  <path fill="#211e1f" d="M150.21,79V49.79H121V66.17l-21,21-21-21V49.79H49.79V79H65.44l21.4,21.4L66.17,121H49.79v29.18H79V134.55l21-21,21,21v15.65h29.18V121H133.82l-20.67-20.66L134.55,79ZM100,106.21h0L73.73,132.48a9.79,9.79,0,0,1,.5,3.08,9.92,9.92,0,1,1-9.92-9.91,9.81,9.81,0,0,1,3.27.56L93.79,100,67.05,73.26a9.91,9.91,0,1,1,7.18-9.53,9.73,9.73,0,0,1-.69,3.6L106.21,100Z"/>
                  <path fill="#f9f9fa" d="M100,106.21l6.21-6.21L73.54,67.33a9.73,9.73,0,0,0,.69-3.6,9.94,9.94,0,1,0-7.18,9.53L93.79,100,67.58,126.21a9.81,9.81,0,0,0-3.27-.56,9.91,9.91,0,1,0,9.92,9.91,9.79,9.79,0,0,0-.5-3.08L100,106.21Z"/>
                </svg>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="https://assets.openterface.com/images/cover-Gibby-with-Christmas-hat_resized.webp" alt="TxA Shop Accessories" loading="lazy" draggable="false" class="carousel-lazy-image">
          </div>
        </div>
      </div>

      <!-- Progress Bars Indicator -->
      <div class="carousel-progress-container">
        <div class="carousel-progress-wrapper">
          <!-- Slide 1 Progress -->
          <div class="progress-item" data-slide="1">
            <div class="progress-bar-wrapper">
              <div class="progress-bar progress-bar--active" id="progress-1"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-1" data-i18n="home.series-kvm-go">KVM-GO Series</div>
              <div class="progress-label-large" id="label-large-1" data-i18n="home.kvm-go-headline">The Ultra-Compact KVM That Fits on Your Keychain</div>
            </div>
          </div>

          <!-- Slide 2 Progress -->
          <div class="progress-item" data-slide="2">
            <div class="progress-bar-wrapper">
              <div class="progress-bar" id="progress-2"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-2" data-i18n="home.series-mini-kvm">Mini-KVM Series</div>
              <div class="progress-label-large" id="label-large-2" data-i18n="home.mini-kvm-headline">The Compact KVM Solution for Professionals</div>
            </div>
          </div>

          <!-- Slide 3 Progress -->
          <div class="progress-item" data-slide="3">
            <div class="progress-bar-wrapper">
              <div class="progress-bar" id="progress-3"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-3" data-i18n="home.series-uconsole">uConsole Ext. Series</div>
              <div class="progress-label-large" id="label-large-3" data-i18n="home.uconsole-headline">Transform Your uConsole Into a KVM Console</div>
            </div>
          </div>

          <!-- Slide 4 Progress -->
          <div class="progress-item" data-slide="4">
            <div class="progress-bar-wrapper progress-bar-wrapper-xmas">
              <div class="progress-bar progress-bar-xmas" id="progress-4">
                <svg class="progress-icon-snowflake" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="12" y1="2" x2="12" y2="22"></line>
                  <line x1="17" y1="7" x2="7" y2="17"></line>
                  <line x1="7" y1="7" x2="17" y2="17"></line>
                  <line x1="2" y1="12" x2="22" y2="12"></line>
                  <line x1="17" y1="17" x2="7" y2="7"></line>
                  <line x1="7" y1="17" x2="17" y2="7"></line>
                </svg>
              </div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-4" data-i18n="home.series-txa-shop">TxA Shop</div>
              <div class="progress-label-large" id="label-large-4" data-i18n="home.txa-shop-headline">Complete Your Setup with Premium Accessories</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <a rel="me" href="https://mastodon.social/@youyoubilly" style="display:none;" data-i18n="home.mastodon">Mastodon</a>

  <script>
    // Sync snowflake icon position with Xmas progress bar
    (function() {
      let animationFrameId = null;
      let isActive = false;
      
      function updateSnowflakePosition() {
        const progressBar = document.getElementById('progress-4');
        const snowflake = progressBar?.querySelector('.progress-icon-snowflake');
        
        if (progressBar && snowflake) {
          // Use offsetWidth directly - this reflects the actual rendered width during animation
          const progressWidth = progressBar.offsetWidth;
          
          // Position snowflake at the right edge of the progress bar
          // Since transform is translate(-50%, -50%), we position it so the center is at the edge
          // But keep it slightly inside to ensure visibility with overflow: hidden
          const snowflakeWidth = 16; // width of snowflake
          const position = Math.max(snowflakeWidth / 2, progressWidth - snowflakeWidth / 2);
          snowflake.style.left = position + 'px';
        }
      }
      
      function animateSnowflake() {
        if (isActive) {
          updateSnowflakePosition();
          animationFrameId = requestAnimationFrame(animateSnowflake);
        }
      }
      
      // Watch for progress bar changes
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes') {
            const progressBar = document.getElementById('progress-4');
            if (progressBar) {
              const wasActive = isActive;
              isActive = progressBar.classList.contains('progress-bar--active');
              
              updateSnowflakePosition();
              
              if (isActive && !wasActive) {
                // Just became active, start animation
                if (!animationFrameId) {
                  animateSnowflake();
                }
              } else if (!isActive && wasActive) {
                // Just became inactive, stop animation
                if (animationFrameId) {
                  cancelAnimationFrame(animationFrameId);
                  animationFrameId = null;
                }
                // Reset snowflake position
                const snowflake = progressBar.querySelector('.progress-icon-snowflake');
                if (snowflake) {
                  snowflake.style.left = '0%';
                }
              }
            }
          }
        });
      });
      
      const progressBar = document.getElementById('progress-4');
      if (progressBar) {
        isActive = progressBar.classList.contains('progress-bar--active');
        
        observer.observe(progressBar, {
          attributes: true,
          attributeFilter: ['style', 'class'],
          childList: false,
          subtree: false
        });
        
        // Initial update
        updateSnowflakePosition();
        
        // Start animation if already active
        if (isActive) {
          animateSnowflake();
        }
      }
    })();
  </script>

{% endblock %}

{% block content %}{% endblock %}

{% block footer %}
  {{ super() }}
{% endblock %}
