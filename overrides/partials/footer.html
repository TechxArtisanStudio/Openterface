<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  {% if "navigation.footer" in features %}
    {% if page.previous_page or page.next_page %}
      {% if page.meta and page.meta.hide %}
        {% if "footer" in page.meta.hide %}
          <nav class="md-footer__inner md-grid" aria-label="{{ lang.t('footer') }}" hidden>
        {% endif %}
      {% else %}
        <nav class="md-footer__inner md-grid" aria-label="{{ lang.t('footer') }}">
      {% endif %}

        <!-- Link to previous page -->
        {% if page.previous_page %}
          {% set direction = lang.t("footer.previous") %}
          <a href="{{ page.previous_page.url | url }}" class="md-footer__link md-footer__link--prev" aria-label="{{ direction }}: {{ page.previous_page.title | e }}">
            <div class="md-footer__button md-icon">
              {% set icon = config.theme.icon.previous or "material/arrow-left" %}
              {% include ".icons/" ~ icon ~ ".svg" %}
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">{{ direction }}</span>
              <div class="md-ellipsis">
                {{ page.previous_page.title }}
              </div>
            </div>
          </a>
        {% endif %}

        <!-- Link to next page -->
        {% if page.next_page %}
          {% set direction = lang.t("footer.next") %}
          <a
            href="{{ page.next_page.url | url }}"
            class="md-footer__link md-footer__link--next"
            aria-label="{{ direction }}: {{ page.next_page.title | e }}"
          >
            <div class="md-footer__title">
              <span class="md-footer__direction">
                {{ direction }}
              </span>
              <div class="md-ellipsis">
                {{ page.next_page.title }}
              </div>
            </div>
            <div class="md-footer__button md-icon">
              {% set icon = config.theme.icon.next or "material/arrow-right" %}
              {% include ".icons/" ~ icon ~ ".svg" %}
            </div>
          </a>
        {% endif %}
      </nav>
    {% endif %}
  {% endif %}

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid footer-flex-container">

      <!-- Signup form -->
      <div class="signup-form-container footer-flex-item">
        {% set current_locale = page.locale or config.theme.language or (page.url.split('/')[1] if page.url and page.url.split('/')[1] in ['de', 'es', 'fr', 'it', 'ja', 'ko', 'pt', 'ro', 'zh'] else 'en') %}
        <!-- All languages submit via AJAX -->
        <div id="form_signup">
          <form id="subscribe-form" 
                name="subscribe-form">
            <div id="form_signup_scroll">
              <div class="gf-field-group">
                {% if current_locale == 'de' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Ihr Name">
                {% elif current_locale == 'es' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Tu Nombre">
                {% elif current_locale == 'fr' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Votre Nom">
                {% elif current_locale == 'it' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Il Tuo Nome">
                {% elif current_locale == 'ja' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="ãŠåå‰">
                {% elif current_locale == 'ko' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="ì´ë¦„">
                {% elif current_locale == 'pt' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Seu Nome">
                {% elif current_locale == 'ro' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Numele tÄƒu">
                {% elif current_locale == 'zh' %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="æ‚¨çš„å§“å">
                {% else %}
                  <input type="text" name="name" class="required" id="form-name" required placeholder="Your Name">
                {% endif %}
              </div>
              <div class="gf-field-group">
                {% if current_locale == 'de' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Ihre E-Mail-Adresse *">
                {% elif current_locale == 'es' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Tu Correo ElectrÃ³nico *">
                {% elif current_locale == 'fr' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Votre Adresse Email *">
                {% elif current_locale == 'it' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Il Tuo Indirizzo Email *">
                {% elif current_locale == 'ja' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *">
                {% elif current_locale == 'ko' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="ì´ë©”ì¼ ì£¼ì†Œ *">
                {% elif current_locale == 'pt' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Seu EndereÃ§o de Email *">
                {% elif current_locale == 'ro' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Adresa ta de email *">
                {% elif current_locale == 'zh' %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="æ‚¨çš„ç”µå­é‚®ç®±åœ°å€ *">
                {% else %}
                  <input type="email" name="email" class="required email" id="form-email" required placeholder="Your Email Address *">
                {% endif %}
              </div>
              <div class="clear">
                {% if current_locale == 'de' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Abonnieren Sie die neuesten Updates! ğŸ">
                  <p class="footnote">Nicht mehr als eine E-Mail pro Monat. Jederzeit kÃ¼ndbar. <br> Bei Fragen schreiben Sie uns an <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% elif current_locale == 'es' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Â¡SuscrÃ­bete a las Ãšltimas Novedades! ğŸ">
                  <p class="footnote">No mÃ¡s de un correo al mes. Cancela cuando quieras. <br> Para consultas, envÃ­anos un correo a <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% elif current_locale == 'fr' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Abonnez-vous aux DerniÃ¨res ActualitÃ©s ! ğŸ">
                  <p class="footnote">Pas plus d'un email par mois. DÃ©sabonnez-vous Ã  tout moment. <br> Pour toute demande, Ã©crivez-nous Ã  <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% elif current_locale == 'it' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Iscriviti per le Ultime NovitÃ ! ğŸ">
                  <p class="footnote">Non piÃ¹ di una email al mese. Cancellati quando vuoi. <br> Per informazioni, scrivici a <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% elif current_locale == 'ja' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ æœ€æ–°æƒ…å ±ã‚’å—ã‘å–ã‚‹ï¼ ğŸ">
                  <p class="footnote">æœˆã«1å›ç¨‹åº¦ã®é…ä¿¡ã§ã™ã€‚ã„ã¤ã§ã‚‚é…ä¿¡è§£é™¤å¯èƒ½ã§ã™ã€‚<br>ãŠå•ã„åˆã‚ã›ã¯ <a href="mailto:info@openterface.com">info@openterface.com</a> ã¾ã§ã€‚</p>
                {% elif current_locale == 'ko' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ ìµœì‹  ì†Œì‹ êµ¬ë…í•˜ê¸°! ğŸ">
                  <p class="footnote">ì›” 1íšŒ ì´í•˜ë¡œ ì´ë©”ì¼ì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤. ì–¸ì œë“ ì§€ êµ¬ë… ì·¨ì†Œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. <br> ë¬¸ì˜ì‚¬í•­ì€ <a href="mailto:info@openterface.com">info@openterface.com</a>ìœ¼ë¡œ ì´ë©”ì¼ ì£¼ì„¸ìš”.</p>
                {% elif current_locale == 'pt' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Inscreva-se para as Ãšltimas Novidades! ğŸ">
                  <p class="footnote">NÃ£o mais do que um e-mail por mÃªs. Cancele a inscriÃ§Ã£o a qualquer momento.</p>
                {% elif current_locale == 'ro' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ AboneazÄƒ-te la cele mai noi È™tiri! ğŸ">
                  <p class="footnote">Nu mai mult de un email pe lunÄƒ. Dezabonare oricÃ¢nd. <br> Pentru Ã®ntrebÄƒri, trimite-ne un email la <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% elif current_locale == 'zh' %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ è®¢é˜…æœ€æ–°åŠ¨æ€ï¼ğŸ">
                  <p class="footnote">æ¯æœˆæœ€å¤šä¸€å°é‚®ä»¶ã€‚éšæ—¶å¯ä»¥å–æ¶ˆè®¢é˜…ã€‚<br> å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‘é€é‚®ä»¶è‡³ <a href="mailto:info@openterface.com">info@openterface.com</a>ã€‚</p>
                {% else %}
                  <input type="submit" name="submit" id="form-submit" class="button" value="âœ‰ï¸ Subscribe to the Latest Buzz! ğŸ">
                  <p class="footnote">No more than one email a month. Unsubscribe anytime. <br> For inquiries, email us at <a href="mailto:info@openterface.com">info@openterface.com</a>.</p>
                {% endif %}
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Copyright info -->
      <div class="footer-flex-item footer-copyright">
        {% include "partials/copyright.html" %}
      </div>

      <!-- Social links -->
      {% if config.extra.social %}
        <div class="footer-flex-item footer-social">
          {% include "partials/social.html" %}
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Load language-select.js -->
  <script>
    (function() {
      var langselect = document.createElement('script');
      langselect.src = "{{ 'assets/javascripts/language-select.js' | url }}";
      langselect.async = false; // Load synchronously to ensure it's available
      document.body.appendChild(langselect);
    })();
  </script>

  <!-- Subscribe Form AJAX Handler -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('subscribe-form');
      const submitBtn = document.getElementById('form-submit');
      const originalBtnValue = submitBtn.value;

      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();

          // Get form data
          const formData = new FormData(form);
          const data = {
            email: formData.get('email'),
            name: formData.get('name')
          };

          // Disable button and change text
          submitBtn.disabled = true;
          submitBtn.value = 'Subscribing...';

          // Send AJAX request
          fetch('https://subscribe.openterface.com/api/subscribe/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
          })
          .then(response => response.json())
          .then(result => {
            if (result.success) {
              submitBtn.value = 'Successfully subscribed!';
              // Clear form fields
              form.reset();
            } else {
              // Handle error response
              submitBtn.value = 'Subscription failed. Try again.';
              submitBtn.disabled = false;
              setTimeout(() => {
                submitBtn.value = originalBtnValue;
              }, 3000);
            }
          })
          .catch(error => {
            console.error('Error:', error);
            submitBtn.value = 'An error occurred. Try again.';
            submitBtn.disabled = false;
            setTimeout(() => {
              submitBtn.value = originalBtnValue;
            }, 3000);
          });
        });
      }
    });
  </script>
</footer>