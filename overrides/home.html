{% extends "main.html" %}

{% block extrahead %}
  {{ super() }}
  
  <!-- SEO Metadata -->
  <meta name="description" content="Discover Openterface - Ultra-compact KVM-over-USB solutions including KVM-GO Series (keychain-sized), Mini-KVM Series, and uConsole KVM Extension. Open-source, feature-rich tools for IT professionals, developers, and server management.">
  <meta name="keywords" content="KVM-over-USB, KVM switch, portable KVM, USB KVM, headless server management, IT tools, server console, remote server access, KVM-GO, Mini-KVM, uConsole KVM, open source KVM, ultra-compact KVM, keychain KVM, 4K KVM, DisplayPort KVM, HDMI KVM, VGA KVM">
  <meta name="author" content="Openterface">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ config.site_url }}{{ page.url if page.url else '/' }}">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ config.site_url }}{{ page.url if page.url else '/' }}">
  <meta property="og:title" content="Openterface | Ultra-Compact KVM Solutions for IT Professionals">
  <meta property="og:description" content="Discover Openterface - Ultra-compact KVM-over-USB solutions including KVM-GO Series (keychain-sized), Mini-KVM Series, and uConsole KVM Extension. Open-source, feature-rich tools for IT professionals, developers, and server management.">
  <meta property="og:image" content="https://assets.openterface.com/images/kvm-go-triple.png">
  <meta property="og:locale" content="en_US">
  <meta property="og:site_name" content="Openterface">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="{{ config.site_url }}{{ page.url if page.url else '/' }}">
  <meta name="twitter:title" content="Openterface | Ultra-Compact KVM Solutions for IT Professionals">
  <meta name="twitter:description" content="Discover Openterface - Ultra-compact KVM-over-USB solutions including KVM-GO Series (keychain-sized), Mini-KVM Series, and uConsole KVM Extension.">
  <meta name="twitter:image" content="https://assets.openterface.com/images/kvm-go-triple.png">
  
  <script>
    // Add class to body to identify homepage (run immediately)
    (function() {
      if (document.body) {
        document.body.classList.add('homepage');
      } else {
        // Fallback if body doesn't exist yet
        document.addEventListener('DOMContentLoaded', function() {
          document.body.classList.add('homepage');
        });
      }
    })();
  </script>
{% endblock %}

{% block tabs %}
  {{ super() }}

  <section class="mdx-carousel-container">
    <div class="mdx-carousel-wrapper">
      <!-- Main Carousel Content -->
      <div class="mdx-carousel" id="mdx-carousel" role="region" aria-label="Featured highlights carousel" data-autoplay="true" data-interval="6000">
        
        <!-- Slide 1: KVM-GO Series -->
        <div class="carousel-slide carousel-slide--active" data-slide-index="1">
          <div class="carousel-content-left">
            <div class="carousel-category">KVM-GO Series</div>
            <h1 class="carousel-headline">The Ultra-Compact KVM That Fits on Keychain</h1>
            <p class="carousel-description">Designed to fit on your keychain and save your day in a snap, this next-generation KVM-over-USB gadget is built for rapid IT operations in the field.</p>
            <div class="carousel-actions">
              <a href="https://www.crowdsupply.com/techxartisan/openterface-kvm-go" class="md-button md-button--primary carousel-btn-preorder" target="_blank" rel="noopener noreferrer">
                <span>Crowdfunding NOW</span>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 140 140" class="carousel-btn-icon">
                  <path d="M 68.3,9.7 8,70 68.3,130.3 Z" fill="#555" />
                  <path d="M 71.7,9.7 V 130.3 L 132,70 Z" fill="#099" />
                  <path d="m 90.7,91 c -6.6,0 -11.8,-3.6 -14,-12 l 8,-1.7 c 0.9,5.1 3.9,7 6.3,7 2.8,0 5,-1.9 5,-5.1 0,-8 -18.2,-8.2 -18.2,-20.1 0,-7.3 4.4,-12 12.8,-12 7.3,0 11.7,4.3 13.1,10.4 l -7.3,2.1 c -1.4,-4 -3.1,-5.7 -6,-5.7 -2.9,0 -4.5,1.8 -4.5,4.7 0,6.4 18.2,6.9 18.2,20.3 0.2,7.2 -4.9,12.1 -13.4,12.1 z" fill="#FFF" />
                  <path d="m 60.7,63.9 h -8.2 v -3.6 c 0,-4.7 -2.1,-6 -5.3,-6 -3.2,0 -5.3,1.3 -5.3,6 v 17.4 c 0,4.7 2.1,6 5.3,6 3.2,0 5.3,-1.3 5.3,-6 v -3.8 h 8.2 v 2.7 c 0,10.5 -5.6,14.3 -13.5,14.3 -7.9,0 -13.5,-3.8 -13.5,-14.3 V 61.4 c 0,-10.5 5.6,-14.3 13.5,-14.3 7.9,0 13.5,3.8 13.5,14.3 z" fill="#FFF" />
                </svg>
              </a>
              <a href="{{ 'product/kvm-go/' | url }}" class="md-button carousel-btn-docs">
                <span>View Docs</span>
              </a>
              <div class="carousel-countdown" id="kvm-go-countdown"></div>
            </div>
          </div>
          <div class="carousel-content-right">
            <img src="{{ 'assets/images/kvm-go-triple.png' | url }}" alt="KVM-GO Series" loading="eager" draggable="false" fetchpriority="high" data-slide-images='["{{ 'assets/images/kvm-go-triple.png' | url }}", "{{ 'assets/images/kvm-go-triple-2.png' | url }}"]' class="carousel-random-image">
          </div>
        </div>

        <!-- Slide 2: Mini-KVM -->
        <div class="carousel-slide" data-slide-index="2">
          <div class="carousel-content-left">
            <div class="carousel-category">Mini-KVM Series</div>
            <h1 class="carousel-headline">The Compact KVM Solution for Professionals</h1>
            <p class="carousel-description">A compact, feature-rich, open-source KVM-over-USB solution that simplifies your tech life with on-the-fly IT tasks and troubleshooting.</p>
            <div class="carousel-actions">
              <a href="{{ config.extra.minikvm_purchase_link | url }}" class="md-button md-button--primary carousel-btn-secondary" target="_blank" rel="noopener noreferrer">
                <span>Order NOW</span>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 140 140" class="carousel-btn-icon">
                  <path d="M 68.3,9.7 8,70 68.3,130.3 Z" fill="#555" />
                  <path d="M 71.7,9.7 V 130.3 L 132,70 Z" fill="#099" />
                  <path d="m 90.7,91 c -6.6,0 -11.8,-3.6 -14,-12 l 8,-1.7 c 0.9,5.1 3.9,7 6.3,7 2.8,0 5,-1.9 5,-5.1 0,-8 -18.2,-8.2 -18.2,-20.1 0,-7.3 4.4,-12 12.8,-12 7.3,0 11.7,4.3 13.1,10.4 l -7.3,2.1 c -1.4,-4 -3.1,-5.7 -6,-5.7 -2.9,0 -4.5,1.8 -4.5,4.7 0,6.4 18.2,6.9 18.2,20.3 0.2,7.2 -4.9,12.1 -13.4,12.1 z" fill="#FFF" />
                  <path d="m 60.7,63.9 h -8.2 v -3.6 c 0,-4.7 -2.1,-6 -5.3,-6 -3.2,0 -5.3,1.3 -5.3,6 v 17.4 c 0,4.7 2.1,6 5.3,6 3.2,0 5.3,-1.3 5.3,-6 v -3.8 h 8.2 v 2.7 c 0,10.5 -5.6,14.3 -13.5,14.3 -7.9,0 -13.5,-3.8 -13.5,-14.3 V 61.4 c 0,-10.5 5.6,-14.3 13.5,-14.3 7.9,0 13.5,3.8 13.5,14.3 z" fill="#FFF" />
                </svg>
              </a>
              <a href="{{ 'product/minikvm/' | url }}" class="md-button carousel-btn-docs">
                <span>View Docs</span>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="{{ 'assets/images/mini-kvm-toolkit.png' | url }}" alt="Openterface Mini-KVM" loading="lazy" draggable="false" class="carousel-lazy-image carousel-random-image" data-slide-images='["{{ 'assets/images/mini-kvm-toolkit.png' | url }}", "{{ 'assets/images/mini-kvm.png' | url }}"]'>
          </div>
        </div>

        <!-- Slide 3: uConsole KVM Extension -->
        <div class="carousel-slide" data-slide-index="3">
          <div class="carousel-content-left">
            <div class="carousel-category">uConsole Ext. Series</div>
            <h1 class="carousel-headline">Transform Your uConsole Into a KVM Console</h1>
            <p class="carousel-description">Turn your uConsole into a portable KVM console ‚Äì now taking pre-orders for Openterface KVM Ext. for uConsole. Your all-in-one portable solution.</p>
            <div class="carousel-actions">
              <a href="https://shop.techxartisan.com/products/openterface-kvm-ext-for-uconsole" class="md-button md-button--primary carousel-btn-secondary" target="_blank" rel="noopener noreferrer">
                <span>Order NOW</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="carousel-btn-icon">
                  <path fill="#faa22c" d="M166.32,10H33.68A23.68,23.68,0,0,0,10,33.68V166.32A23.68,23.68,0,0,0,33.68,190H166.32A23.68,23.68,0,0,0,190,166.32V33.68A23.68,23.68,0,0,0,166.32,10ZM150.21,79H134.55l-21.4,21.4L133.82,121h16.39v29.18H121V134.56l-21-21-21,21v15.66H49.79V121H66.17l20.67-20.66L65.44,79H49.79V49.79H79V66.18l21,21,21-21V49.79h29.18Z"/>
                  <path fill="#211e1f" d="M150.21,79V49.79H121V66.17l-21,21-21-21V49.79H49.79V79H65.44l21.4,21.4L66.17,121H49.79v29.18H79V134.55l21-21,21,21v15.65h29.18V121H133.82l-20.67-20.66L134.55,79ZM100,106.21h0L73.73,132.48a9.79,9.79,0,0,1,.5,3.08,9.92,9.92,0,1,1-9.92-9.91,9.81,9.81,0,0,1,3.27.56L93.79,100,67.05,73.26a9.91,9.91,0,1,1,7.18-9.53,9.73,9.73,0,0,1-.69,3.6L106.21,100Z"/>
                  <path fill="#f9f9fa" d="M100,106.21l6.21-6.21L73.54,67.33a9.73,9.73,0,0,0,.69-3.6,9.94,9.94,0,1,0-7.18,9.53L93.79,100,67.58,126.21a9.81,9.81,0,0,0-3.27-.56,9.91,9.91,0,1,0,9.92,9.91,9.79,9.79,0,0,0-.5-3.08L100,106.21Z"/>
                </svg>
              </a>
              <a href="{{ 'product/uconsole-kvm-extension/' | url }}" class="md-button carousel-btn-docs">
                <span>View Docs</span>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="{{ 'assets/images/uconsole.png' | url }}" alt="uConsole KVM Extension" loading="lazy" draggable="false" class="carousel-lazy-image carousel-random-image" data-slide-images='["{{ 'assets/images/op-uconsole-ext-c1.png' | url }}", "{{ 'assets/images/uconsole.png' | url }}"]'>
          </div>
        </div>

        <!-- Slide 4: TxA Shop - Accessories -->
        <div class="carousel-slide" data-slide-index="4">
          <div class="carousel-content-left">
            <div class="carousel-category">TxA Shop</div>
            <h1 class="carousel-headline">Complete Your Setup with Premium Accessories</h1>
            <p class="carousel-description">Explore our range of essential accessories including video adapters, high-speed cables, and storage solutions. Enhance your Openterface experience with quality accessories designed for professionals.</p>
            <div class="carousel-actions">
              <a href="https://shop.techxartisan.com/" class="md-button md-button--primary carousel-btn-xmas" target="_blank" rel="noopener noreferrer">
                <span>üéÑ Xmas Special</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="carousel-btn-icon">
                  <path fill="#faa22c" d="M166.32,10H33.68A23.68,23.68,0,0,0,10,33.68V166.32A23.68,23.68,0,0,0,33.68,190H166.32A23.68,23.68,0,0,0,190,166.32V33.68A23.68,23.68,0,0,0,166.32,10ZM150.21,79H134.55l-21.4,21.4L133.82,121h16.39v29.18H121V134.56l-21-21-21,21v15.66H49.79V121H66.17l20.67-20.66L65.44,79H49.79V49.79H79V66.18l21,21,21-21V49.79h29.18Z"/>
                  <path fill="#211e1f" d="M150.21,79V49.79H121V66.17l-21,21-21-21V49.79H49.79V79H65.44l21.4,21.4L66.17,121H49.79v29.18H79V134.55l21-21,21,21v15.65h29.18V121H133.82l-20.67-20.66L134.55,79ZM100,106.21h0L73.73,132.48a9.79,9.79,0,0,1,.5,3.08,9.92,9.92,0,1,1-9.92-9.91,9.81,9.81,0,0,1,3.27.56L93.79,100,67.05,73.26a9.91,9.91,0,1,1,7.18-9.53,9.73,9.73,0,0,1-.69,3.6L106.21,100Z"/>
                  <path fill="#f9f9fa" d="M100,106.21l6.21-6.21L73.54,67.33a9.73,9.73,0,0,0,.69-3.6,9.94,9.94,0,1,0-7.18,9.53L93.79,100,67.58,126.21a9.81,9.81,0,0,0-3.27-.56,9.91,9.91,0,1,0,9.92,9.91,9.79,9.79,0,0,0-.5-3.08L100,106.21Z"/>
                </svg>
              </a>
            </div>
          </div>
          <div class="carousel-content-right">
            <img data-src="https://assets.openterface.com/images/cover-Gibby-with-Christmas-hat_resized.webp" alt="TxA Shop Accessories" loading="lazy" draggable="false" class="carousel-lazy-image">
          </div>
        </div>
      </div>

      <!-- Progress Bars Indicator -->
      <div class="carousel-progress-container">
        <div class="carousel-progress-wrapper">
          <!-- Slide 1 Progress -->
          <div class="progress-item" data-slide="1">
            <div class="progress-bar-wrapper">
              <div class="progress-bar progress-bar--active" id="progress-1"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-1">KVM-GO Series</div>
              <div class="progress-label-large" id="label-large-1">The Ultra-Compact KVM That Fits on Your Keychain</div>
            </div>
          </div>

          <!-- Slide 2 Progress -->
          <div class="progress-item" data-slide="2">
            <div class="progress-bar-wrapper">
              <div class="progress-bar" id="progress-2"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-2">Mini-KVM Series</div>
              <div class="progress-label-large" id="label-large-2">The Compact KVM Solution for Professionals</div>
            </div>
          </div>

          <!-- Slide 3 Progress -->
          <div class="progress-item" data-slide="3">
            <div class="progress-bar-wrapper">
              <div class="progress-bar" id="progress-3"></div>
            </div>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-3">uConsole Ext. Series</div>
              <div class="progress-label-large" id="label-large-3">Transform Your uConsole Into a KVM Console</div>
            </div>
          </div>

          <!-- Slide 4 Progress -->
          <div class="progress-item" data-slide="4">
            <div class="progress-bar-wrapper progress-bar-wrapper-xmas">
              <div class="progress-bar progress-bar-xmas" id="progress-4"></div>
            </div>
            <span class="progress-icon-snowflake">‚ùÑÔ∏è</span>
            <div class="progress-labels">
              <div class="progress-label-small" id="label-small-4">TxA Shop</div>
              <div class="progress-label-large" id="label-large-4">Complete Your Setup with Premium Accessories</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  {% include "partials/home-videos.html" %}

  <a rel="me" href="https://mastodon.social/@youyoubilly" style="display:none;">Mastodon</a>

{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // Home Videos Carousel - Pause on hover and position cards to overlap footer
    (function() {
      document.addEventListener('DOMContentLoaded', function() {
        const carousel = document.getElementById('home-videos-carousel');
        if (!carousel) return;
        
        // Pause animation on hover
        carousel.addEventListener('mouseenter', function() {
          carousel.style.animationPlayState = 'paused';
        });
        
        carousel.addEventListener('mouseleave', function() {
          carousel.style.animationPlayState = 'running';
        });
        
        // Position cards and thumbnails dynamically to allow overlap with footer
        // Only on desktop screens (not mobile)
        function isMobileScreen() {
          return window.innerWidth <= 768;
        }
        
        // Clean up any existing clones (in case of resize or initial load on mobile)
        function cleanupClones() {
          const existingClones = document.querySelectorAll('.home-video-thumbnail-clone, .home-video-card[style*="position: fixed"]');
          existingClones.forEach(function(clone) {
            if (clone.parentNode) {
              clone.parentNode.removeChild(clone);
            }
          });
        }
        
        // Clean up on initial load if mobile
        if (isMobileScreen()) {
          cleanupClones();
        }
        
        const videoItems = carousel.querySelectorAll('.home-video-item');
        videoItems.forEach(function(item) {
          const card = item.querySelector('.home-video-card');
          const thumbnail = item.querySelector('.home-video-thumbnail');
          const thumbnailImg = thumbnail ? thumbnail.querySelector('img') : null;
          if (!card || !thumbnail || !thumbnailImg) return;
          
          let cardClone = null;
          let thumbnailClone = null;
          
          // Skip cloning on mobile - use CSS positioning instead
          if (isMobileScreen()) {
            // Ensure original elements are visible and not modified
            thumbnail.style.opacity = '';
            thumbnail.style.pointerEvents = '';
            thumbnail.style.transform = '';
            thumbnail.style.boxShadow = '';
            card.style.visibility = '';
            card.style.opacity = '';
            card.style.transform = '';
            return;
          }
          
          item.addEventListener('mouseenter', function() {
            // Double check - skip on mobile
            if (isMobileScreen()) {
              cleanupClones();
              return;
            }
            const rect = item.getBoundingClientRect();
            const thumbnailRect = thumbnail.getBoundingClientRect();
            
            // Create a clone of the thumbnail and append to body for true overlap
            thumbnailClone = thumbnail.cloneNode(true);
            
            // Get computed styles from original
            const computedStyle = window.getComputedStyle(thumbnail);
            
            // Apply all necessary styles to clone
            // Note: position fixed is relative to viewport, not document
            thumbnailClone.style.position = 'fixed';
            thumbnailClone.style.top = thumbnailRect.top + 'px';
            thumbnailClone.style.left = thumbnailRect.left + 'px';
            thumbnailClone.style.width = thumbnailRect.width + 'px';
            thumbnailClone.style.height = thumbnailRect.height + 'px';
            thumbnailClone.style.zIndex = '99998';
            thumbnailClone.style.transform = 'scale(1.15)';
            thumbnailClone.style.transformOrigin = 'center center';
            thumbnailClone.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.2)';
            thumbnailClone.style.pointerEvents = 'none';
            thumbnailClone.style.opacity = '1';
            thumbnailClone.style.transition = 'none';
            thumbnailClone.style.margin = '0';
            thumbnailClone.style.padding = '0';
            thumbnailClone.style.borderRadius = computedStyle.borderRadius || '8px';
            thumbnailClone.style.overflow = 'hidden';
            thumbnailClone.style.backgroundColor = computedStyle.backgroundColor || 'transparent';
            thumbnailClone.style.display = 'block';
            thumbnailClone.style.visibility = 'visible';
            thumbnailClone.className = 'home-video-thumbnail home-video-thumbnail-clone';
            
            // Ensure the cloned image has the same dimensions and styles
            const clonedImg = thumbnailClone.querySelector('img');
            if (clonedImg) {
              // Ensure image source is set
              if (!clonedImg.src || clonedImg.src === window.location.href) {
                clonedImg.src = thumbnailImg.src || thumbnailImg.getAttribute('src') || '';
              }
              clonedImg.style.width = '100%';
              clonedImg.style.height = '100%';
              clonedImg.style.objectFit = 'cover';
              clonedImg.style.display = 'block';
              clonedImg.style.opacity = '1';
              clonedImg.style.visibility = 'visible';
              clonedImg.style.margin = '0';
              clonedImg.style.padding = '0';
            }
            
            // Append clone to body
            document.body.appendChild(thumbnailClone);
            
            // Wait for clone to be rendered and image to be ready
            const checkClone = function() {
              if (thumbnailClone && thumbnailClone.parentNode) {
                const cloneRect = thumbnailClone.getBoundingClientRect();
                const cloneImg = thumbnailClone.querySelector('img');
                // Check if clone is visible and has dimensions
                if (cloneRect.width > 0 && cloneRect.height > 0) {
                  // Hide original only if clone is successfully rendered
                  thumbnail.style.opacity = '0';
                  thumbnail.style.pointerEvents = 'none';
                } else {
                  // If clone isn't rendering, keep original visible
                  console.warn('Thumbnail clone not rendering properly, keeping original visible');
                }
              }
            };
            
            // Check immediately and after a short delay
            requestAnimationFrame(checkClone);
            setTimeout(checkClone, 50);
            
            // Create a clone of the card and append to body for true overlap
            cardClone = card.cloneNode(true);
            cardClone.style.position = 'fixed';
            // Note: position fixed is relative to viewport, not document
            cardClone.style.top = (rect.bottom + 8) + 'px';
            cardClone.style.left = rect.left + 'px';
            cardClone.style.zIndex = '99999';
            cardClone.style.width = card.offsetWidth + 'px';
            cardClone.style.opacity = '1';
            cardClone.style.visibility = 'visible';
            cardClone.style.transform = 'translateY(0)';
            cardClone.style.maxHeight = '300px';
            cardClone.style.pointerEvents = 'none';
            document.body.appendChild(cardClone);
            
            // Hide original card
            card.style.visibility = 'hidden';
          });
          
          item.addEventListener('mouseleave', function() {
            // Skip on mobile
            if (isMobileScreen()) {
              return;
            }
            // Immediately restore original thumbnail visibility BEFORE removing clone
            // This ensures smooth transition back to normal size
            if (thumbnail) {
              thumbnail.style.opacity = '1';
              thumbnail.style.pointerEvents = '';
              thumbnail.style.zIndex = '10000';
              thumbnail.style.position = 'relative';
            }
            
            // Remove cloned thumbnail immediately (original is now visible)
            if (thumbnailClone && thumbnailClone.parentNode) {
              thumbnailClone.parentNode.removeChild(thumbnailClone);
              thumbnailClone = null;
            }
            
            // Immediately restore original card visibility BEFORE removing clone
            // This ensures smooth transition back to hidden state
            card.style.visibility = 'visible';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
            card.style.maxHeight = '300px';
            card.style.zIndex = '9999';
            
            // Remove cloned card immediately (original is now visible)
            if (cardClone && cardClone.parentNode) {
              cardClone.parentNode.removeChild(cardClone);
              cardClone = null;
            }
            
            // Now let CSS handle the transition back to hidden state
            // Use requestAnimationFrame to ensure the visible state is rendered first
            requestAnimationFrame(function() {
              // Reset to let CSS transitions handle the fade out
              card.style.visibility = '';
              card.style.opacity = '';
              card.style.transform = '';
              card.style.maxHeight = '';
              card.style.zIndex = '';
              
              // Reset thumbnail z-index after transition completes
              setTimeout(function() {
                if (thumbnail) {
                  thumbnail.style.zIndex = '';
                  thumbnail.style.position = '';
                }
              }, 300);
            });
          });
          
          // Update position on scroll/resize
          let updatePosition = function() {
            // Skip on mobile
            if (isMobileScreen()) {
              // Clean up any clones if we switched to mobile
              if (thumbnailClone && thumbnailClone.parentNode) {
                thumbnailClone.parentNode.removeChild(thumbnailClone);
                thumbnailClone = null;
              }
              if (cardClone && cardClone.parentNode) {
                cardClone.parentNode.removeChild(cardClone);
                cardClone = null;
              }
              if (thumbnail) {
                thumbnail.style.opacity = '';
                thumbnail.style.pointerEvents = '';
              }
              if (card) {
                card.style.visibility = '';
                card.style.opacity = '';
                card.style.transform = '';
              }
              return;
            }
            
            if (item.matches(':hover')) {
              const rect = item.getBoundingClientRect();
              const thumbnailRect = thumbnail.getBoundingClientRect();
              
              if (thumbnailClone) {
                thumbnailClone.style.top = thumbnailRect.top + 'px';
                thumbnailClone.style.left = thumbnailRect.left + 'px';
              }
              
              if (cardClone) {
                cardClone.style.top = (rect.bottom + 8) + 'px';
                cardClone.style.left = rect.left + 'px';
              }
            }
          };
          
          window.addEventListener('scroll', updatePosition, true);
          window.addEventListener('resize', function() {
            updatePosition();
            // Also cleanup on resize to mobile
            if (isMobileScreen()) {
              cleanupClones();
            }
          });
        });
      });
    })();
  </script>
{% endblock %}

{% block content %}{% endblock %}

{% block footer %}
  {{ super() }}
{% endblock %}
